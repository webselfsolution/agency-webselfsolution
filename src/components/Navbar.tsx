"use client";

import Link from "next/link";
import React, { useEffect, useState } from "react";
import { BiSolidContact } from "react-icons/bi";
import { IoMenu } from "react-icons/io5";
import { PiPhoneCallFill } from "react-icons/pi";

export default function Navbar() {
  const [menuOpen, setMenuOpen] = useState(false);

  const [isVisible, setIsVisible] = useState(true);
  const [lastScrollY, setLastScrollY] = useState(0);

  const controlNavbar = () => {
    if (typeof window !== "undefined") {
      if (window.scrollY < lastScrollY) {
        // Scrolling up
        setIsVisible(true);
      } else {
        // Scrolling down
        setIsVisible(false);
      }
      setLastScrollY(window.scrollY);
    }
  };

  useEffect(() => {
    if (typeof window !== "undefined") {
      window.addEventListener("scroll", controlNavbar);

      return () => {
        window.removeEventListener("scroll", controlNavbar);
      };
    }
  }, [lastScrollY]);

  return (
    <div
      className={`bg-black-100 fixed top-0 w-full z-50 flex md:flex-row justify-between items-center transition-transform duration-300 right-0 py-4 px-8 ${
        isVisible ? "translate-y-0" : "-translate-y-full"
      }`}
    >
      <Link href="/">
        <div className="flex justify-center items-center ">
          <svg
            width="130"
            height="26"
            viewBox="0 0 130 26"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M6.52597 7.74666C6.25842 7.28205 6.38176 6.63679 6.80228 6.30396L12.178 2.04926C12.227 2.01044 12.278 1.97781 12.3303 1.95125C12.3826 1.88123 12.4662 1.83591 12.5603 1.83591H14.0303H14.196H15.463H17.3442H17.3858H19.1488H20.5756H22.0515C22.2101 1.83591 22.3386 1.96444 22.3386 2.12299V5.02568V9.30099C22.3386 9.54624 22.3285 9.78874 22.3087 10.0279C22.3047 10.076 22.2882 10.1222 22.2612 10.1622L20.7345 12.4294L18.1569 16.2573C18.1256 16.3037 18.0816 16.3402 18.0296 16.3611C17.6463 16.5153 17.2465 16.628 16.8342 16.6949C16.6026 16.7324 16.4487 16.4775 16.5604 16.2711C16.6903 16.0312 16.8088 15.7819 16.915 15.5245C17.0661 15.1585 17.1923 14.7759 17.2911 14.3796C17.4568 13.7157 17.5456 13.0136 17.5456 12.2872V11.7444V11.4543V8.84175C17.5456 8.6832 17.417 8.55467 17.2585 8.55467H16.8435H14.3558H11.1549H9.55164H7.77467C7.54719 8.52322 7.33232 8.46058 7.14437 8.36947C6.83555 8.21977 6.61811 8.00225 6.52829 7.75318L6.52597 7.74666ZM6.94063 7.43472H9.55164H11.1549C12.6786 7.43472 14.0777 6.81185 15.1759 5.77219C15.3126 5.64275 15.4446 5.50685 15.5717 5.36489C15.6697 5.25537 15.7647 5.14224 15.8566 5.02568C16.3348 4.41927 16.7281 3.72013 17.0145 2.95397C17.0825 2.7718 16.9445 2.58242 16.75 2.58242H15.463H14.196H13.6802H13.0714L6.94063 7.43472ZM18.82 5.18525C18.82 5.62566 19.177 5.98269 19.6175 5.98269C20.0579 5.98269 20.4149 5.62566 20.4149 5.18525C20.4149 4.74483 20.0579 4.3878 19.6175 4.3878C19.177 4.3878 18.82 4.74483 18.82 5.18525ZM0.417664 13.7685C-0.00289452 14.1013 -0.126221 14.7467 0.141434 15.2113L0.143718 15.2177C0.233531 15.4668 0.450973 15.6843 0.7598 15.834C0.949701 15.9261 1.1671 15.9891 1.39721 16.0202H3.16704H4.77028H7.9712H10.4589H10.8739C11.0324 16.0202 11.161 16.1487 11.161 16.3073V18.9199V19.21V19.7527C11.161 20.4791 11.0722 21.1813 10.9065 21.8452C10.8077 22.2414 10.6815 22.624 10.5304 22.99C10.4242 23.2474 10.3057 23.4967 10.1758 23.7367C10.0641 23.943 10.218 24.1979 10.4496 24.1604C10.8619 24.0936 11.2617 23.9808 11.645 23.8266C11.697 23.8057 11.741 23.7692 11.7723 23.7228L14.3499 19.895L15.8766 17.6277C15.9036 17.5877 15.9201 17.5415 15.9241 17.4935C15.9439 17.2543 15.954 17.0118 15.954 16.7665V12.4912V9.58851C15.954 9.42997 15.8255 9.30143 15.6669 9.30143H14.191H12.7642H11.0012H10.9596H9.07843H7.81143H7.64569H6.17573C6.08636 9.30143 6.00653 9.34228 5.95387 9.40631C5.90644 9.43101 5.86009 9.46096 5.81545 9.4963L0.417664 13.7685ZM3.16704 14.9002H0.554737L6.68549 10.0479H7.29563H7.81143H9.07843H10.3654C10.5599 10.0479 10.6979 10.2373 10.6299 10.4195C10.3435 11.1857 9.9502 11.8848 9.47205 12.4912C9.38015 12.6078 9.28511 12.7209 9.18709 12.8304C9.06004 12.9724 8.92798 13.1083 8.79125 13.2377C7.69309 14.2774 6.29396 14.9002 4.77028 14.9002H3.16704Z"
              fill="#E8E5F8"
            />
            <path
              d="M45.594 9.05617C45.1756 9.9943 44.7234 10.9189 44.2375 11.8301C43.7515 12.7345 43.2419 13.5916 42.7088 14.4015C42.1823 15.2114 41.6424 15.9606 41.0889 16.649C40.5355 17.3307 39.9855 17.9212 39.4388 18.4207C38.8988 18.9134 38.369 19.3015 37.8493 19.5849C37.3364 19.8616 36.8504 20 36.3915 20C36.2025 20 36.027 19.9663 35.8651 19.8988C35.7031 19.8313 35.5613 19.7402 35.4399 19.6254C35.3184 19.5039 35.2239 19.3622 35.1564 19.2002C35.0889 19.0382 35.0552 18.8628 35.0552 18.6738V13.7637L29.8313 19.6052C29.6963 19.7402 29.5478 19.8414 29.3858 19.9089C29.2306 19.9696 29.0686 20 28.8999 20C28.7177 20 28.5456 19.9663 28.3836 19.8988C28.2283 19.8313 28.09 19.7402 27.9685 19.6254C27.847 19.5039 27.7491 19.3622 27.6749 19.2002C27.6074 19.0382 27.5737 18.8628 27.5737 18.6738V9.05617H30.2059V15.2924L35.45 9.43075C35.639 9.24177 35.8617 9.12366 36.1182 9.07641C36.3814 9.02242 36.6378 9.04942 36.8876 9.1574C37.1373 9.25864 37.333 9.42062 37.4747 9.64335C37.6232 9.85932 37.6975 10.0989 37.6975 10.3621V16.6186C38.2644 16.072 38.7773 15.4949 39.2363 14.8875C39.6952 14.28 40.1204 13.6557 40.5119 13.0146C40.9101 12.3667 41.2813 11.712 41.6255 11.0506C41.9765 10.3824 42.3173 9.71759 42.648 9.05617H45.594ZM58.2792 12.6805C58.2792 13.0449 58.2151 13.4398 58.0868 13.865C57.9586 14.2834 57.7494 14.6749 57.4591 15.0393C57.1757 15.397 56.8011 15.6974 56.3354 15.9404C55.8765 16.1833 55.3163 16.3048 54.6548 16.3048H49.9068V13.8042H54.6548C55.0126 13.8042 55.2893 13.6962 55.485 13.4803C55.6807 13.2575 55.7786 12.9842 55.7786 12.6602C55.7786 12.316 55.6672 12.0461 55.4445 11.8503C55.2285 11.6546 54.9653 11.5567 54.6548 11.5567H49.9068C49.5491 11.5567 49.2724 11.6681 49.0766 11.8908C48.8809 12.1068 48.783 12.3768 48.783 12.7007V16.3757C48.783 16.7266 48.891 17 49.107 17.1957C49.3297 17.3914 49.6031 17.4893 49.927 17.4893H54.6548V20H49.9068C49.5423 20 49.1475 19.9359 48.7223 19.8076C48.3038 19.6794 47.9124 19.4736 47.5479 19.1901C47.1902 18.8999 46.8899 18.5253 46.6469 18.0664C46.4039 17.6007 46.2825 17.0371 46.2825 16.3757V12.6805C46.2825 12.316 46.3466 11.9246 46.4748 11.5061C46.603 11.0809 46.8089 10.6895 47.0924 10.3318C47.3826 9.96731 47.7572 9.66359 48.2161 9.42062C48.6818 9.17765 49.2454 9.05617 49.9068 9.05617H54.6548C55.0193 9.05617 55.4108 9.12028 55.8292 9.24852C56.2544 9.37675 56.6459 9.58598 57.0036 9.87619C57.368 10.1597 57.6717 10.5342 57.9147 10.9999C58.1577 11.4589 58.2792 12.0191 58.2792 12.6805ZM72.1184 16.3048C72.1184 16.5545 72.088 16.8178 72.0273 17.0945C71.9733 17.3712 71.8856 17.6479 71.7641 17.9246C71.6426 18.1946 71.484 18.4544 71.2883 18.7042C71.0993 18.9539 70.8664 19.1766 70.5897 19.3723C70.3197 19.5613 70.0059 19.7132 69.6482 19.8279C69.2905 19.9426 68.8855 20 68.4333 20H63.6853C63.4356 20 63.1723 19.973 62.8956 19.919C62.6189 19.8583 62.3422 19.7672 62.0655 19.6457C61.7955 19.5242 61.5357 19.3689 61.2859 19.18C61.0362 18.9842 60.8135 18.7514 60.6178 18.4814C60.4288 18.2047 60.2769 17.8875 60.1622 17.5298C60.0475 17.1653 59.9901 16.757 59.9901 16.3048V4.42959H62.6223V16.3048C62.6223 16.6288 62.7235 16.8886 62.926 17.0843C63.1285 17.2733 63.3816 17.3678 63.6853 17.3678H68.4333C68.7641 17.3678 69.0205 17.2699 69.2028 17.0742C69.3917 16.8785 69.4862 16.622 69.4862 16.3048V12.7412C69.4862 12.4105 69.3884 12.1541 69.1926 11.9718C68.9969 11.7828 68.7438 11.6884 68.4333 11.6884H63.6853V9.05617H68.4333C68.6831 9.05617 68.9463 9.08654 69.223 9.14728C69.4997 9.20127 69.7731 9.28901 70.043 9.4105C70.3197 9.53198 70.583 9.69059 70.8327 9.88632C71.0824 10.0753 71.3018 10.3081 71.4907 10.5849C71.6797 10.8548 71.8316 11.1687 71.9463 11.5264C72.061 11.8841 72.1184 12.289 72.1184 12.7412V16.3048ZM84.9453 16.3048C84.9453 16.757 84.8879 17.1653 84.7732 17.5298C84.6584 17.8875 84.5066 18.2047 84.3176 18.4814C84.1286 18.7514 83.9093 18.9842 83.6595 19.18C83.4098 19.3689 83.1466 19.5242 82.8699 19.6457C82.5999 19.7672 82.3232 19.8583 82.0397 19.919C81.763 19.973 81.4998 20 81.2501 20H74.1229V17.3678H81.2298C81.5875 17.3678 81.8575 17.2767 82.0397 17.0945C82.222 16.9122 82.3131 16.649 82.3131 16.3048C82.2793 15.6029 81.925 15.2519 81.2501 15.2519H77.1702C76.5898 15.2519 76.0971 15.1507 75.6921 14.9482C75.2872 14.7457 74.9565 14.4926 74.7 14.1889C74.4503 13.8852 74.268 13.5579 74.1533 13.2069C74.0453 12.856 73.9913 12.5286 73.9913 12.2249C73.9913 11.6377 74.0959 11.145 74.3052 10.7468C74.5144 10.3419 74.7776 10.0146 75.0948 9.76483C75.412 9.51511 75.7562 9.33626 76.1274 9.22827C76.4986 9.11353 76.8462 9.05617 77.1702 9.05617H83.6393V11.6884H77.1904C77.0555 11.6884 76.9475 11.7052 76.8665 11.739C76.7922 11.766 76.7349 11.8065 76.6944 11.8605C76.6606 11.9077 76.6404 11.9617 76.6336 12.0224C76.6269 12.0764 76.6235 12.1304 76.6235 12.1844C76.6303 12.2924 76.6505 12.3768 76.6842 12.4375C76.718 12.4983 76.7585 12.5421 76.8057 12.5691C76.8597 12.5961 76.9171 12.613 76.9778 12.6197C77.0453 12.6197 77.1094 12.6197 77.1702 12.6197H81.2501C81.925 12.6197 82.4987 12.7412 82.9711 12.9842C83.4436 13.2272 83.8249 13.5343 84.1151 13.9055C84.4053 14.2699 84.6146 14.6681 84.7428 15.1001C84.8778 15.532 84.9453 15.9336 84.9453 16.3048ZM98.5719 12.6805C98.5719 13.0449 98.5078 13.4398 98.3796 13.865C98.2513 14.2834 98.0421 14.6749 97.7519 15.0393C97.4684 15.397 97.0938 15.6974 96.6281 15.9404C96.1692 16.1833 95.609 16.3048 94.9476 16.3048H90.1995V13.8042H94.9476C95.3053 13.8042 95.582 13.6962 95.7777 13.4803C95.9735 13.2575 96.0713 12.9842 96.0713 12.6602C96.0713 12.316 95.96 12.0461 95.7373 11.8503C95.5213 11.6546 95.2581 11.5567 94.9476 11.5567H90.1995C89.8418 11.5567 89.5651 11.6681 89.3694 11.8908C89.1737 12.1068 89.0758 12.3768 89.0758 12.7007V16.3757C89.0758 16.7266 89.1838 17 89.3998 17.1957C89.6225 17.3914 89.8958 17.4893 90.2198 17.4893H94.9476V20H90.1995C89.8351 20 89.4402 19.9359 89.015 19.8076C88.5966 19.6794 88.2051 19.4736 87.8407 19.1901C87.483 18.8999 87.1826 18.5253 86.9397 18.0664C86.6967 17.6007 86.5752 17.0371 86.5752 16.3757V12.6805C86.5752 12.316 86.6393 11.9246 86.7676 11.5061C86.8958 11.0809 87.1016 10.6895 87.3851 10.3318C87.6753 9.96731 88.0499 9.66359 88.5089 9.42062C88.9746 9.17765 89.5381 9.05617 90.1995 9.05617H94.9476C95.3121 9.05617 95.7035 9.12028 96.122 9.24852C96.5472 9.37675 96.9386 9.58598 97.2963 9.87619C97.6608 10.1597 97.9645 10.5342 98.2075 10.9999C98.4504 11.4589 98.5719 12.0191 98.5719 12.6805ZM105.152 20H103.978C103.6 20 103.195 19.9359 102.763 19.8076C102.338 19.6794 101.94 19.4702 101.569 19.18C101.197 18.883 100.89 18.5017 100.647 18.036C100.404 17.5635 100.283 16.9865 100.283 16.3048V4.42959H102.915V16.3048C102.915 16.6288 103.016 16.8886 103.219 17.0843C103.421 17.2733 103.674 17.3678 103.978 17.3678H105.152V20ZM116.532 11.6884H110.579V9.05617H116.532V11.6884ZM116.532 6.94029H110.599C110.241 6.94029 109.971 7.0314 109.789 7.21363C109.607 7.38911 109.516 7.64896 109.516 7.99317V20H106.884V7.99317C106.884 7.54097 106.941 7.13602 107.056 6.77831C107.17 6.4206 107.322 6.10676 107.511 5.8368C107.707 5.56008 107.93 5.32723 108.179 5.13825C108.429 4.94253 108.689 4.78392 108.959 4.66243C109.236 4.54095 109.512 4.45321 109.789 4.39921C110.066 4.33847 110.329 4.3081 110.579 4.3081H116.532V6.94029Z"
              fill="#F8F7FF"
            />
          </svg>
        </div>
      </Link>

      {/* Desktop Navigation */}
      <div className="hidden md:flex flex-row justify-center items-center gap-4 md:gap-8 lg:gap-16 xl:gap-24 border border-white-200/10 rounded-full p-4 text-sm lg:text-base">
        <Link href="/">
          <div className="flex-shrink-0">Home</div>
        </Link>
        <Link href="/#services">
          <div className="flex-shrink-0">Services</div>
        </Link>
        <Link href="/#portfolio">
          <div className="flex-shrink-0">Portfolio</div>
        </Link>
        <Link href="/#about">
          <div className="flex-shrink-0">About</div>
        </Link>
      </div>

      {/* Book Call Button */}
      <div className="flex md:flex-row justify-center items-center gap-4 md:gap-8 lg:gap-12 xl:gap-16">
        {/* <Link href="/#contact">
          <div className="hidden sm:flex lg:text-xl">Contact</div>
        </Link> */}
        <div>
          <button className="relative inline-flex h-10 md:h-12 lg:h-12 overflow-hidden rounded-full p-[1px]">
            <span className="absolute inset-[-1000%] animate-[spin_2s_linear_infinite] bg-[conic-gradient(from_90deg_at_50%_50%,#E2CBFF_0%,#393BB2_50%,#E2CBFF_100%)]" />
            <span className="inline-flex h-full w-full cursor-pointer items-center justify-center rounded-full bg-slate-950 px-2 py-1 text-xs font-medium text-white backdrop-blur-3xl sm:px-2 sm:py-2 sm:text-sm md:px-2 md:py-3 md:text-base lg:px-2 lg:py-4 lg:text-lg xl:px-2 xl:py-5 xl:text-lg">
              <div className="flex items-center gap-2 lg:px-6">
                <PiPhoneCallFill /> <Link href="/#contact">Contact</Link>
              </div>
            </span>
          </button>
        </div>
        {/* Mobile Menu Toggle */}
        <div
          className="text-3xl md:hidden text-white sm:font-bold sm:text-3xl"
          onClick={() => setMenuOpen(!menuOpen)}
        >
          <IoMenu />
        </div>

        {/* Mobile Menu */}
        <div
          className={`absolute top-16 right-0 w-full mt-4 bg-[#030014] border border-white-200/10 rounded-lg shadow-lg md:hidden transition-transform duration-300 ${
            menuOpen ? "" : "hidden"
          }`}
        >
          {menuOpen ? (
            <div className="flex flex-col gap-3 font-bold py-5 px-3 text-sm lg:text-xl">
              <Link href="/">
                <div className="flex-shrink-0 sm:font-bold sm:text-lg hover:text-blue-400 transition-colors duration-300">
                  Home
                </div>
              </Link>
              <Link href="/#services">
                {" "}
                <div className="flex-shrink-0 sm:font-bold sm:text-lg hover:text-blue-400 transition-colors duration-300">
                  Services
                </div>
              </Link>
              <Link href="/#portfolio">
                <div className="flex-shrink-0 sm:font-bold sm:text-lg hover:text-blue-400 transition-colors duration-300">
                  Portfolio
                </div>
              </Link>
              <Link href="/#about">
                <div className="flex-shrink-0 sm:font-bold sm:text-lg hover:text-blue-400 transition-colors duration-300">
                  About
                </div>
              </Link>
            </div>
          ) : (
            ""
          )}
          <div className="flex justify-center items-center font-bold pb-4 text-sm lg:text-xl">
            <Link href="/#contact">
              <button className="relative inline-flex h-10 md:h-12 lg:h-12 overflow-hidden rounded-full p-[1px]">
                <span className="absolute inset-[-1000%] animate-[spin_2s_linear_infinite] bg-[conic-gradient(from_90deg_at_50%_50%,#E2CBFF_0%,#393BB2_50%,#E2CBFF_100%)]" />
                <span className="inline-flex h-full w-full cursor-pointer items-center justify-center rounded-full bg-slate-950 px-2 py-1 text-xs font-medium text-white backdrop-blur-3xl sm:px-2 sm:py-2 sm:text-sm md:px-2 md:py-3 md:text-base lg:px-2 lg:py-4 lg:text-lg xl:px-2 xl:py-5 xl:text-xl">
                  <div className="flex items-center gap-2">
                    <BiSolidContact /> Contact Us
                  </div>
                </span>
              </button>
            </Link>
          </div>
        </div>
      </div>
    </div>
  );
}
